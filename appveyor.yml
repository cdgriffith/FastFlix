version: 1.0.0-{build}

image:
- Visual Studio 2017
- Ubuntu1804

platform: x64

branches:
  only:
  - master
  - build

install:
  - cmd: C:\Python36-x64\python -m pip install --upgrade pip setuptools --ignore-installed
  - cmd: C:\Python36-x64\python -m pip install -r requirements.txt
  - sh: python3.6 -m pip install --upgrade pip setuptools --ignore-installed
  - sh: python3.6 -m pip install -r requirements.txt

build_script:
  - cmd: C:\Python36-x64\Scripts\pyinstaller --add-data "data\icon.ico;data" --paths "C:\Python36-x64\Lib\site-packages\shiboken2" --noconsole flix\gui.py  --icon data\icon.ico --name FastFlix --clean --onefile
  - sh: pyinstaller --add-data "data\icon.ico;data" --noconsole flix\gui.py  --icon data\icon.ico --name FastFlix --clean --onefile

test: off

artifacts:
  - path: dist\*
